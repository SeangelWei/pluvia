package view;

import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Rectangle;
import controllers.GamescreenController;
import utils.Input;
import utils.WorldRenderer;


public class Gamescreen implements Screen {
    WorldRenderer worldRenderer;
    GamescreenController gsController;

    public Gamescreen(SpriteBatch batch) {
        worldRenderer = new WorldRenderer(batch);
        gsController = new GamescreenController();
    }

    public void render(Input input) {
        switch (gsController.getGameState()) {
            case paused:
                processPause(input);
                break;
            case playing:
                processPlaying(input);
                break;
            case win:
                processWin(input);
                break;
            case gameover:
                processGameover(input);
                break;
            case ready:
                processReady(input);
                break;
        }
        gsController.update();
        worldRenderer.render(gsController);
    }

    private void processReady(Input input) {

    }

    private void processGameover(Input input) {

    }

    private void processWin(Input input) {

    }

    private void processPause(Input input) {

    }

    private void processPlaying(Input input) {
        if(input.LEFT){
            gsController.getPlayer().moveLeft();
        }
        if(input.RIGHT){
            gsController.getPlayer().moveRight();
        }
        if(input.SPACE){
            gsController.getPlayer().shot();
        }
        if(pointInRectangle(gsController.arrow_left, input.TOUCH.x, input.TOUCH.y)){
            gsController.getPlayer().moveLeft();
        }
        if(pointInRectangle(gsController.arrow_right, input.TOUCH.x, input.TOUCH.y)){
            gsController.getPlayer().moveRight();
        }
    }
    public static boolean pointInRectangle (Rectangle r, float x, float y) {
        return (x >= r.x && x < r.x + r.width);
        //TODO missing y check
    }
    @Override
    public void resume() { }

    @Override
    public void render(float delta) {
        //To change body of implemented methods use File | Settings | File Templates.
    }

    @Override
    public void resize(int width, int height) { }

    @Override
    public void show() { }

    @Override
    public void hide() { }

    @Override
    public void pause() { }

    @Override
    public void dispose() { }
}